---
phase: 36-integration-polish
plan: 02
type: execute
wave: 2
depends_on: [36-01]
files_modified:
  - AGENTS.md
autonomous: true
requirements: [INTG-03]
outcome_ids: [DO-14]

must_haves:
  truths:
    - "AGENTS.md is a lean index — no stale completed work lists or optional next steps"
    - "AGENTS.md points to relevant plugin files for detailed content"
    - "AGENTS.md testing section references npm test, not individual smoke commands"
    - "AGENTS.md reflects current project structure including commands/ directory"
  artifacts:
    - path: "AGENTS.md"
      provides: "Lean project index for agents"
      contains: "commands/"
  key_links:
    - from: "AGENTS.md"
      to: "commands/"
      via: "Project Structure section"
      pattern: "commands/"
---

<objective>
Rewrite AGENTS.md as a lean project index — remove stale sections, add commands/ directory, update testing references.

Purpose: AGENTS.md should inform agents about the dev repo structure without duplicating plugin content or listing completed history (INTG-03).
Output: Lean AGENTS.md reflecting current v6.0 project state.
</objective>

<execution_context>
@/home/cam/.config/opencode/get-shit-done/workflows/execute-plan.md
@/home/cam/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/INTENT.md
@.planning/phases/36-integration-polish/36-CONTEXT.md
@.planning/phases/36-integration-polish/36-01-SUMMARY.md
@AGENTS.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Rewrite AGENTS.md as lean project index</name>
  <files>AGENTS.md</files>
  <action>
    Rewrite AGENTS.md following these CONTEXT.md decisions:

    1. **Keep** the core identity sections:
       - "What This Is" — update to reflect current state (v6.0, bGSD branding)
       - "Project Structure" — add `commands/*.md` line for command wrappers, keep existing entries current
       - "Development Rules" — keep all 5 rules, they're still valid
       - "Architecture" — keep but ensure it mentions commands/ directory

    2. **Remove entirely:**
       - "Completed Work" section (Bug Fixes, New Features) — this is history, lives in `.planning/`
       - "Optional Next Steps" section — the roadmap tracks this; these items are either done or irrelevant

    3. **Update "Key Commands":**
       - Keep `node bin/gsd-tools.cjs <command> [args]` (drop `--raw` — it's the default for piped output now)
       - Keep `./deploy.sh`
       - Keep the real-project test example

    4. **Update "Testing" section:**
       - Primary: `npm test` for full test suite
       - Secondary: `npm run build` for build validation
       - Remove individual smoke-test commands (per CONTEXT.md: "Testing section should reference `npm test` for full suite")

    5. **Add brief "Commands" section** listing the 11 slash commands available via `commands/gsd-*.md` (one line each, just name + purpose).

    The result should be significantly shorter than the current 90 lines — targeting ~50-60 lines. Agents don't need history, they need orientation.
  </action>
  <verify>
    - `wc -l AGENTS.md` shows reduction from 90 lines
    - `grep -c 'Completed Work' AGENTS.md` returns 0
    - `grep -c 'Optional Next Steps' AGENTS.md` returns 0
    - `grep 'commands/' AGENTS.md` shows commands directory referenced
    - `grep 'npm test' AGENTS.md` shows test suite reference
  </verify>
  <done>AGENTS.md is a lean index under 65 lines, no stale sections, reflects current project structure including commands/, testing references npm test</done>
</task>

<task type="auto">
  <name>Task 2: Dead code sweep and final validation</name>
  <files></files>
  <action>
    1. **Sweep for stale --raw references** that were supposed to be removed in Phase 35:
       - `grep -r '\-\-raw' workflows/ references/` — should return zero matches
       - If any remain, remove them

    2. **Check for stale imports or references** in src/ files:
       - Look for any references to removed functionality
       - Check that no source files reference `workflows/cmd-*.md` directly (they should reference via the commands/ wrappers)

    3. **Final validation gate:**
       - `npm run build` — must succeed, bundle under 1000KB
       - `npm test` — all tests must pass
       - `ls commands/gsd-*.md | wc -l` — must be 11

    4. No bundle size metrics or thresholds beyond "build succeeds" (per CONTEXT.md: "No bundle size measurements or thresholds — npm run build success is the gate").
  </action>
  <verify>
    - `npm run build` succeeds
    - `npm test` passes all tests
    - `grep -r '\-\-raw' workflows/ references/ | grep -v '#' | wc -l` returns 0 (excluding comments)
  </verify>
  <done>No dead code remains, build passes, full test suite green, project is ready for milestone closure</done>
</task>

</tasks>

<verification>
- AGENTS.md is lean (under 65 lines), no stale sections
- No --raw references in workflows/references
- Build + tests pass
- Phase 36 complete — all INTG-01, INTG-02, INTG-03, QUAL-03 requirements met
</verification>

<success_criteria>
AGENTS.md reflects current project state as a lean index, dead code is swept, build and tests pass. v6.0 milestone is ready for closure.
</success_criteria>

<output>
After completion, create `.planning/phases/36-integration-polish/36-02-SUMMARY.md`
</output>
