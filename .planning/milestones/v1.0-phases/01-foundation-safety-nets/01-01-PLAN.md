---
phase: 01-foundation-safety-nets
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - AGENTS.md
autonomous: true
requirements:
  - FOUND-05
  - DOC-01

must_haves:
  truths:
    - "`npm test` runs the existing test suite from the project root and all 81 tests pass"
    - "`npm run build` executes without error (placeholder echo until Phase 4)"
    - "AGENTS.md line 11 shows the actual line count of gsd-tools.cjs (6,495+), not 5400+"
  artifacts:
    - path: "package.json"
      provides: "Project manifest with name, version, engines, scripts"
      contains: "engines"
    - path: "AGENTS.md"
      provides: "Accurate project documentation"
      contains: "6,495"
  key_links:
    - from: "package.json"
      to: "bin/gsd-tools.test.cjs"
      via: "scripts.test field"
      pattern: "node --test bin/gsd-tools.test.cjs"
---

<objective>
Create package.json and fix stale documentation — formalizing the project structure.

Purpose: Establishes the project as a proper Node.js project with `npm test` and `npm run build` entry points, and fixes the stale line count in AGENTS.md. These are prerequisite scaffolding for all subsequent test work.
Output: `package.json` at project root, updated `AGENTS.md`
</objective>

<execution_context>
@/home/cam/.config/opencode/get-shit-done/workflows/execute-plan.md
@/home/cam/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation-safety-nets/01-RESEARCH.md
@AGENTS.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create package.json with engines, scripts, and metadata</name>
  <files>package.json</files>
  <action>
Create `package.json` at the project root with the following exact content:

```json
{
  "name": "gsd-tools",
  "version": "1.0.0",
  "description": "CLI utility for GSD workflow operations",
  "bin": {
    "gsd-tools": "./bin/gsd-tools.cjs"
  },
  "engines": {
    "node": ">=18"
  },
  "scripts": {
    "test": "node --test bin/gsd-tools.test.cjs",
    "build": "echo 'Build system not yet configured — see Phase 4 (BUILD-01)'"
  },
  "devDependencies": {},
  "private": true
}
```

Key decisions (per research):
- `private: true` — not published to npm, deployed via file copy
- `version: "1.0.0"` — starting version for this improvement pass
- No `main` field — CLI tool, not a library
- `devDependencies` empty until Phase 4 adds esbuild
- `build` script is a placeholder echo — Phase 4 delivers the real build system
- `test` script points to the existing test file
  </action>
  <verify>
Run `npm test` from the project root — all 81 existing tests should pass.
Run `npm run build` — should print the placeholder message without error (exit code 0).
Run `node -e "const p = require('./package.json'); console.log(p.engines.node)"` — should print `>=18`.
  </verify>
  <done>
`package.json` exists at project root. `npm test` runs all existing tests successfully. `npm run build` exits cleanly with placeholder message. `engines.node` is `>=18`.
  </done>
</task>

<task type="auto">
  <name>Task 2: Fix stale line count in AGENTS.md</name>
  <files>AGENTS.md</files>
  <action>
Update AGENTS.md line 11 to reflect the actual line count of `gsd-tools.cjs`.

Current (stale): `bin/gsd-tools.cjs          # Main CLI tool (5400+ lines, single file)`
Updated: `bin/gsd-tools.cjs          # Main CLI tool (6,495+ lines, single file)`

Verify the actual count first with `wc -l bin/gsd-tools.cjs` and use that number. If it has changed from 6,495, use the current number.

Also check line 91 which says "Line count update — CLAUDE.md says '5400+ lines' but gsd-tools.cjs is now 6,495 lines" — update this to say the line count has been fixed, or remove the item from the Optional Next Steps since it will be done.

Actually, per AGENTS.md line 91: `6. **Line count update** — CLAUDE.md says "5400+ lines" but gsd-tools.cjs is now 6,495 lines` — remove this entire line from the Optional Next Steps list since we are fixing it now. Renumber remaining items if needed (there are only items 1-5 left, and they use numbered list so renumbering is automatic).
  </action>
  <verify>
Run `grep "5400" AGENTS.md` — should return NO matches (stale count fully removed).
Run `grep "6,495" AGENTS.md` — should match line 11.
  </verify>
  <done>
AGENTS.md line 11 shows accurate line count. The "Line count update" item is removed from Optional Next Steps. No references to "5400" remain in AGENTS.md.
  </done>
</task>

</tasks>

<verification>
1. `npm test` exits with code 0 and all 81 tests pass
2. `npm run build` exits with code 0 (placeholder)
3. `grep -c "5400" AGENTS.md` returns 0
4. `node -e "const p = require('./package.json'); console.log(JSON.stringify({name: p.name, engines: p.engines, private: p.private}))"` returns expected values
</verification>

<success_criteria>
- package.json exists with correct engines, scripts, and metadata
- `npm test` successfully runs the existing test suite
- AGENTS.md has accurate line count documentation
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-safety-nets/01-01-SUMMARY.md`
</output>
