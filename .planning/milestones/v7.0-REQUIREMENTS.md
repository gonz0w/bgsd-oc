# Requirements Archive: GSD Plugin v7.0

**Defined:** 2026-02-26
**Shipped:** 2026-02-27
**Core Value:** Intelligent agent orchestration for building large-scale software — right agent, right context, right time

## v7.0 Requirements — All Complete

### Foundation & Safety

- [x] **SAFE-01**: CLI JSON output has consumer contract tests (snapshot-based) covering all init and state commands
- [x] **SAFE-02**: Pre-commit safety checks detect dirty tree, rebase in progress, detached HEAD before git-write operations

### AST Intelligence

- [x] **AST-01**: User can generate function signature extraction for JS/TS files via acorn parser
- [x] **AST-02**: User can generate export surface analysis for any JS/TS module
- [x] **AST-03**: User can generate per-function/module complexity metrics for task classification
- [x] **AST-04**: Non-JS languages fall back to regex-based signature extraction via detector registry pattern

### Context Efficiency

- [x] **CTX-01**: User can generate a repository map (~1k token compact codebase summary from AST signatures)
- [x] **CTX-02**: Each agent type declares required context via manifest; system provides only declared context at spawn
- [x] **CTX-03**: CLI commands support compact serialization format with 40-60% token reduction for agent consumption
- [x] **CTX-04**: Task-scoped file injection loads only task-relevant files using dependency graph and relevance scoring

### Orchestration Intelligence

- [x] **ORCH-01**: User can classify task complexity (1-5 score) based on file count, cross-module reach, and test requirements
- [x] **ORCH-02**: System auto-selects agent type and model tier based on task classification
- [x] **ORCH-03**: System auto-selects between single/parallel/team execution mode based on plan structure

### Agent Quality

- [x] **QUAL-01**: Code review agent (gsd-reviewer) reviews code changes against project conventions before commit
- [x] **QUAL-02**: Commits are tagged with agent type in metadata for attribution and tracking
- [x] **QUAL-03**: Verification pipeline includes post-execution review step via gsd-reviewer

### Git Intelligence

- [x] **GIT-01**: User can query structured git log, diff summary, blame, and branch info via enhanced git.js commands
- [x] **GIT-02**: Pre-commit checks detect uncommitted changes, active rebase, detached HEAD, and shallow clones

### TDD Execution

- [x] **TDD-01**: Executor follows RED→GREEN→REFACTOR state machine for `type: tdd` plans, with verification gates between each phase
- [x] **TDD-02**: RED phase commits a failing test before any implementation code exists; orchestrator verifies test actually fails
- [x] **TDD-03**: GREEN phase writes minimal implementation; orchestrator verifies previously-failing test now passes
- [x] **TDD-04**: REFACTOR phase commits are verified to not break any passing tests
- [x] **TDD-05**: TDD commit discipline uses git trailers (`GSD-Phase: red|green|refactor`) for audit trail

### Execution Discipline

- [x] **EXEC-01**: Auto test-after-edit: executor runs test suite after each file modification to catch errors early
- [x] **EXEC-02**: Anti-pattern detection blocks common AI mistakes (pre-test code in TDD, YAGNI violations, over-mocking) with explanations

### Review Gate Hardening

- [x] **QUAL-04**: Reviewer performs two-stage review: spec compliance (plan must_haves) THEN code quality (conventions, patterns)
- [x] **QUAL-05**: Review findings are severity-classified (blocker/warning/info) with blockers preventing task completion
- [x] **QUAL-06**: Stuck/loop detection identifies when executor is repeating failed patterns and triggers recovery

## Outcome Summary

- **Total requirements:** 29
- **Completed:** 29
- **Deferred to future:** 0 (all shipped)

## Future Requirements (carried forward)

- **ORCH-04**: Agent performance tracking — per-agent success/failure rates fed back into routing decisions
- **CTX-05**: Conversation compaction via LLM API compact-2026-01-12
- **PERF-01**: Performance profiler module with node:perf_hooks wrapper
- **GIT-03**: Full PR automation with human gate
- **GIT-04**: Stacked PR workflow support
- **GIT-05**: Merge intelligence and conflict resolution

---
*Requirements defined: 2026-02-26*
*Shipped: 2026-02-27*
